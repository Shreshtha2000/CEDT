<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OmniPresent</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="../styles/interface.css">
    <link rel="icon" type="image/x-icon" href="../media/images/logo2.png">
</head>

<body onload="init();">
    <nav>
        <div class="logo">
            <img src="../media/images/logo2.png" alt="">
            <div class="logo-text">
                <span>OmniPresent</span>
            </div>
        </div>
    </nav>
    <!-- <div id="message" style="position:absolute;">message</div> -->
    <div class="main-container" style="resize: horizontal;">
        <div class="container" style="float: left;">
            <canvas class="mydiv" id="canvas" width="400" height="275" ondblclick="createPopup();"">
                <p>
                    This example requires a browser that supports the
                    <a href="http://www.w3.org/html/wg/html5/">HTML5</a>
                    &lt;canvas&gt; feature.
                </p> 
            </canvas><br>
            <!-- Lat: <input id="latbox" name="lat" val="40.713956" />Long: <input id="lngbox" name="long" val="74.006653" /> -->
            <div class="info">
                <div class="buttons">
                    <button id="quick">quick</button>
                    <button id="actions">actions</button>
                </div>
                <div class="data">
                    <div class="data-bit">
                        <span>Altitude (m)</span>
                        <p>0.00</p>
                    </div>
                    <div class="data-bit">
                        <span>GroundSpeed (m/s)</span>
                        <p>0.00</p>
                    </div>
                    <div class="data-bit">
                        <span>Dist to WP (m)</span>
                        <p>0.00</p>
                    </div>
                    <div class="data-bit">
                        <span>Yaw (deg)</span>
                        <p>0.00</p>
                    </div>
                    <div class="data-bit">
                        <span>Vertical Speed (m/s)</span>
                        <p>0.00</p>
                    </div>
                    <div class="data-bit">
                        <span>DistToMAV</span>
                        <p>0.00</p>
                    </div>
                </div>
            </div>
            <div class="video">
                <h1>video</h1>
            </div>
            <!-- <br /> -->
            <canvas id="graphcanvas" width="500" height="80" style="display: none;"></canvas><br />
            <!-- <div id="curve_chart" style="width: 500px; height: 200px;"></div> -->
        </div>
        <!-- <div id="serverStatus" style="width: 500px; overflow-y: auto; flex-grow: 0;"></div> -->
    </div>
    <div style="height: 92vh; display: flex; flex-direction: column; resize: horizontal; overflow: auto;">

        <!-- <canvas id="canvas" width="300" height="200"></canvas><br> -->
        <!-- <div id="log"></div> -->
        <!-- <div id="cesiumContainer" style="height: 50%; display: none;"></div> -->
        <div id="map"></div>
    </div>
    <script src="http://smoothiecharts.org/smoothie.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="/mav/Cesium/Cesium.js"></script>
    <script src="/mav/bundle.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script>
    var map = L.map('map').setView([-41.2858, 174.78682], 14);
        mapLink = 
            '<a href="http://www.esri.com/">Esri</a>';
        wholink = 
            'i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community';
        L.tileLayer(
            'http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: '&copy; '+mapLink+', '+wholink,
            maxZoom: 18,
            }).addTo(map);;

    if(!navigator.geolocation) {
        console.log("Your browser doesn't support geolocation feature!")
    } else {
    //     setInterval(() => {
    //         navigator.geolocation.getCurrentPosition(getPosition)
    //     }, 1000);
    // }
                navigator.geolocation.getCurrentPosition(getPosition)}

    var marker, circle;

    function getPosition(position){
        // console.log(position)
        var lat = position.coords.latitude
        var long = position.coords.longitude
        var accuracy = position.coords.accuracy

        if(marker) {
            map.removeLayer(marker)
        }

        if(circle) {
            map.removeLayer(circle)
        }

        marker = L.marker([lat, long])
        circle = L.circle([lat, long], {radius: accuracy})

        var featureGroup = L.featureGroup([marker, circle]).addTo(map)

        map.fitBounds(featureGroup.getBounds())

        console.log("Your coordinate is: Lat: "+ lat +" Long: "+ long+ " Accuracy: "+ accuracy)
    }
     </script>
    <script src="../scripts/interface.js"></script>
    <script src="../scripts/app.js"></script>
</body>
</html>